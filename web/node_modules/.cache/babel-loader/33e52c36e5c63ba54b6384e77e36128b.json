{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport ItemFormBase from '@/components/ItemFormBase';\nimport axios from 'axios';\nimport { USER_ROLES } from '@/lib/constants';\nexport default {\n  mixins: [ItemFormBase],\n  data() {\n    return {\n      users: null,\n      userId: null,\n      teamMembers: null,\n      USER_ROLES\n    };\n  },\n  async created() {\n    this.teamMembers = (await axios({\n      method: 'get',\n      url: this.getItemsUrl(),\n      responseType: 'json'\n    })).data;\n    this.users = (await axios({\n      method: 'get',\n      url: '/api/users',\n      responseType: 'json'\n    })).data.filter(user => !this.teamMembers.some(teamMember => user.id === teamMember.id));\n  },\n  methods: {\n    getItemsUrl() {\n      return `/api/project/${this.projectId}/users`;\n    },\n    getSingleItemUrl() {\n      return `/api/project/${this.projectId}/users/${this.itemId}`;\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AAEA;EACAA;EAEAC;IACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EAEA;IACA;MACAC;MACAC;MACAC;IACA;IAEA;MACAF;MACAC;MACAC;IACA;EACA;EAEAC;IACAC;MACA;IACA;IAEAC;MACA;IACA;EACA;AACA","names":["mixins","data","users","userId","teamMembers","USER_ROLES","method","url","responseType","methods","getItemsUrl","getSingleItemUrl"],"sourceRoot":"src/components","sources":["TeamMemberForm.vue"],"sourcesContent":["<template>\n  <v-form\n    ref=\"form\"\n    lazy-validation\n    v-model=\"formValid\"\n    v-if=\"teamMembers != null && users != null\"\n  >\n    <v-alert\n      :value=\"formError\"\n      color=\"error\"\n      class=\"pb-2\"\n    >{{ formError }}</v-alert>\n\n    <v-select\n      v-model=\"item.user_id\"\n      :label=\"$t('user')\"\n      :items=\"users\"\n      item-value=\"id\"\n      :item-text=\"(itm) => `${itm.username} (${itm.name})`\"\n      :rules=\"[v => !!v || $t('user_required')]\"\n      required\n      :disabled=\"formSaving\"\n    ></v-select>\n\n    <v-select\n      v-model=\"item.role\"\n      :label=\"$t('role')\"\n      :items=\"USER_ROLES\"\n      item-value=\"slug\"\n      item-text=\"title\"\n      :rules=\"[v => !!v || $t('user_required')]\"\n      required\n      :disabled=\"formSaving\"\n    ></v-select>\n  </v-form>\n</template>\n<script>\nimport ItemFormBase from '@/components/ItemFormBase';\nimport axios from 'axios';\nimport { USER_ROLES } from '@/lib/constants';\n\nexport default {\n  mixins: [ItemFormBase],\n\n  data() {\n    return {\n      users: null,\n      userId: null,\n      teamMembers: null,\n      USER_ROLES,\n    };\n  },\n\n  async created() {\n    this.teamMembers = (await axios({\n      method: 'get',\n      url: this.getItemsUrl(),\n      responseType: 'json',\n    })).data;\n\n    this.users = (await axios({\n      method: 'get',\n      url: '/api/users',\n      responseType: 'json',\n    })).data.filter((user) => !this.teamMembers.some((teamMember) => user.id === teamMember.id));\n  },\n\n  methods: {\n    getItemsUrl() {\n      return `/api/project/${this.projectId}/users`;\n    },\n\n    getSingleItemUrl() {\n      return `/api/project/${this.projectId}/users/${this.itemId}`;\n    },\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module"}